diff --git a/dist/index.js b/dist/index.js
index 481afe821d5eb4fb8432daeee921376462dc2015..41d6955a8481a456d26789981cb6bec0c001cfe2 100644
--- a/dist/index.js
+++ b/dist/index.js
@@ -73,7 +73,7 @@ ${a.message}`:x,C=[_,t,e].filter(Boolean).join(`
 `),a=!1,r=!1,i;e.on("response",s=>{let{headers:c}=s;a=c["transfer-encoding"]==="chunked"&&!c["content-length"]}),e.on("socket",s=>{let c=()=>{if(a&&!r){let l=new Error("Premature close");l.code="ERR_STREAM_PREMATURE_CLOSE",t(l)}},d=l=>{r=Jr.Buffer.compare(l.slice(-5),n)===0,!r&&i&&(r=Jr.Buffer.compare(i.slice(-3),n.slice(0,3))===0&&Jr.Buffer.compare(l.slice(-2),n.slice(3))===0),i=l};s.prependListener("close",c),s.on("data",d),e.on("close",()=>{s.removeListener("close",c),s.removeListener("data",d)})})}var A1=U(Vo()),Ms=U(require("fs/promises"));function Va(e){let t=e.length;for(;--t>=0;)e[t]=0}var xT=0,Vy=1,yT=2,wT=3,_T=258,wu=29,mi=256,oi=mi+1+wu,Za=30,_u=19,Xy=2*oi+1,zn=15,au=16,ST=7,Su=256,Yy=16,Ky=17,Qy=18,gu=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Os=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ET=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Jy=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kT=512,Pt=new Array((oi+2)*2);Va(Pt);var ai=new Array(Za*2);Va(ai);var si=new Array(kT);Va(si);var ci=new Array(_T-wT+1);Va(ci);var Eu=new Array(wu);Va(Eu);var Fs=new Array(Za);Va(Fs);function ru(e,t,n,a,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=a,this.max_length=r,this.has_stree=e&&e.length}var e1,t1,n1;function iu(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}var a1=e=>e<256?si[e]:si[256+(e>>>7)],li=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Fe=(e,t,n)=>{e.bi_valid>au-n?(e.bi_buf|=t<<e.bi_valid&65535,li(e,e.bi_buf),e.bi_buf=t>>au-e.bi_valid,e.bi_valid+=n-au):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},gt=(e,t,n)=>{Fe(e,n[t*2],n[t*2+1])},r1=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},CT=e=>{e.bi_valid===16?(li(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},TT=(e,t)=>{let n=t.dyn_tree,a=t.max_code,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,c=t.stat_desc.extra_base,d=t.stat_desc.max_length,l,u,h,m,v,g,x=0;for(m=0;m<=zn;m++)e.bl_count[m]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Xy;l++)u=e.heap[l],m=n[n[u*2+1]*2+1]+1,m>d&&(m=d,x++),n[u*2+1]=m,!(u>a)&&(e.bl_count[m]++,v=0,u>=c&&(v=s[u-c]),g=n[u*2],e.opt_len+=g*(m+v),i&&(e.static_len+=g*(r[u*2+1]+v)));if(x!==0){do{for(m=d-1;e.bl_count[m]===0;)m--;e.bl_count[m]--,e.bl_count[m+1]+=2,e.bl_count[d]--,x-=2}while(x>0);for(m=d;m!==0;m--)for(u=e.bl_count[m];u!==0;)h=e.heap[--l],!(h>a)&&(n[h*2+1]!==m&&(e.opt_len+=(m-n[h*2+1])*n[h*2],n[h*2+1]=m),u--)}},i1=(e,t,n)=>{let a=new Array(zn+1),r=0,i,s;for(i=1;i<=zn;i++)a[i]=r=r+n[i-1]<<1;for(s=0;s<=t;s++){let c=e[s*2+1];c!==0&&(e[s*2]=r1(a[c]++,c))}},RT=()=>{let e,t,n,a,r,i=new Array(zn+1);for(n=0,a=0;a<wu-1;a++)for(Eu[a]=n,e=0;e<1<<gu[a];e++)ci[n++]=a;for(ci[n-1]=a,r=0,a=0;a<16;a++)for(Fs[a]=r,e=0;e<1<<Os[a];e++)si[r++]=a;for(r>>=7;a<Za;a++)for(Fs[a]=r<<7,e=0;e<1<<Os[a]-7;e++)si[256+r++]=a;for(t=0;t<=zn;t++)i[t]=0;for(e=0;e<=143;)Pt[e*2+1]=8,e++,i[8]++;for(;e<=255;)Pt[e*2+1]=9,e++,i[9]++;for(;e<=279;)Pt[e*2+1]=7,e++,i[7]++;for(;e<=287;)Pt[e*2+1]=8,e++,i[8]++;for(i1(Pt,oi+1,i),e=0;e<Za;e++)ai[e*2+1]=5,ai[e*2]=r1(e,5);e1=new ru(Pt,gu,mi+1,oi,zn),t1=new ru(ai,Os,0,Za,zn),n1=new ru(new Array(0),ET,0,_u,ST)},o1=e=>{let t;for(t=0;t<oi;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Za;t++)e.dyn_dtree[t*2]=0;for(t=0;t<_u;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Su*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},s1=e=>{e.bi_valid>8?li(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},AT=(e,t,n,a)=>{s1(e),a&&(li(e,n),li(e,~n)),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},py=(e,t,n,a)=>{let r=t*2,i=n*2;return e[r]<e[i]||e[r]===e[i]&&a[t]<=a[n]},ou=(e,t,n)=>{let a=e.heap[n],r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&py(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!py(t,a,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=a},uy=(e,t,n)=>{let a,r,i=0,s,c;if(e.last_lit!==0)do a=e.pending_buf[e.d_buf+i*2]<<8|e.pending_buf[e.d_buf+i*2+1],r=e.pending_buf[e.l_buf+i],i++,a===0?gt(e,r,t):(s=ci[r],gt(e,s+mi+1,t),c=gu[s],c!==0&&(r-=Eu[s],Fe(e,r,c)),a--,s=a1(a),gt(e,s,n),c=Os[s],c!==0&&(a-=Fs[s],Fe(e,a,c)));while(i<e.last_lit);gt(e,Su,t)},bu=(e,t)=>{let n=t.dyn_tree,a=t.stat_desc.static_tree,r=t.stat_desc.has_stree,i=t.stat_desc.elems,s,c,d=-1,l;for(e.heap_len=0,e.heap_max=Xy,s=0;s<i;s++)n[s*2]!==0?(e.heap[++e.heap_len]=d=s,e.depth[s]=0):n[s*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=a[l*2+1]);for(t.max_code=d,s=e.heap_len>>1;s>=1;s--)ou(e,n,s);l=i;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ou(e,n,1),c=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=c,n[l*2]=n[s*2]+n[c*2],e.depth[l]=(e.depth[s]>=e.depth[c]?e.depth[s]:e.depth[c])+1,n[s*2+1]=n[c*2+1]=l,e.heap[1]=l++,ou(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],TT(e,t),i1(n,d,e.bl_count)},dy=(e,t,n)=>{let a,r=-1,i,s=t[0*2+1],c=0,d=7,l=4;for(s===0&&(d=138,l=3),t[(n+1)*2+1]=65535,a=0;a<=n;a++)i=s,s=t[(a+1)*2+1],!(++c<d&&i===s)&&(c<l?e.bl_tree[i*2]+=c:i!==0?(i!==r&&e.bl_tree[i*2]++,e.bl_tree[Yy*2]++):c<=10?e.bl_tree[Ky*2]++:e.bl_tree[Qy*2]++,c=0,r=i,s===0?(d=138,l=3):i===s?(d=6,l=3):(d=7,l=4))},fy=(e,t,n)=>{let a,r=-1,i,s=t[0*2+1],c=0,d=7,l=4;for(s===0&&(d=138,l=3),a=0;a<=n;a++)if(i=s,s=t[(a+1)*2+1],!(++c<d&&i===s)){if(c<l)do gt(e,i,e.bl_tree);while(--c!==0);else i!==0?(i!==r&&(gt(e,i,e.bl_tree),c--),gt(e,Yy,e.bl_tree),Fe(e,c-3,2)):c<=10?(gt(e,Ky,e.bl_tree),Fe(e,c-3,3)):(gt(e,Qy,e.bl_tree),Fe(e,c-11,7));c=0,r=i,s===0?(d=138,l=3):i===s?(d=6,l=3):(d=7,l=4)}},PT=e=>{let t;for(dy(e,e.dyn_ltree,e.l_desc.max_code),dy(e,e.dyn_dtree,e.d_desc.max_code),bu(e,e.bl_desc),t=_u-1;t>=3&&e.bl_tree[Jy[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},OT=(e,t,n,a)=>{let r;for(Fe(e,t-257,5),Fe(e,n-1,5),Fe(e,a-4,4),r=0;r<a;r++)Fe(e,e.bl_tree[Jy[r]*2+1],3);fy(e,e.dyn_ltree,t-1),fy(e,e.dyn_dtree,n-1)},IT=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(n=32;n<mi;n++)if(e.dyn_ltree[n*2]!==0)return 1;return 0},my=!1,jT=e=>{my||(RT(),my=!0),e.l_desc=new iu(e.dyn_ltree,e1),e.d_desc=new iu(e.dyn_dtree,t1),e.bl_desc=new iu(e.bl_tree,n1),e.bi_buf=0,e.bi_valid=0,o1(e)},c1=(e,t,n,a)=>{Fe(e,(xT<<1)+(a?1:0),3),AT(e,t,n,!0)},qT=e=>{Fe(e,Vy<<1,3),gt(e,Su,Pt),CT(e)},FT=(e,t,n,a)=>{let r,i,s=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=IT(e)),bu(e,e.l_desc),bu(e,e.d_desc),s=PT(e),r=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=r&&(r=i)):r=i=n+5,n+4<=r&&t!==-1?c1(e,t,n,a):e.strategy===4||i===r?(Fe(e,(Vy<<1)+(a?1:0),3),uy(e,Pt,ai)):(Fe(e,(yT<<1)+(a?1:0),3),OT(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),uy(e,e.dyn_ltree,e.dyn_dtree)),o1(e),a&&s1(e)},zT=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(ci[n]+mi+1)*2]++,e.dyn_dtree[a1(t)*2]++),e.last_lit===e.lit_bufsize-1),BT=jT,DT=c1,LT=FT,NT=zT,MT=qT,UT={_tr_init:BT,_tr_stored_block:DT,_tr_flush_block:LT,_tr_tally:NT,_tr_align:MT},$T=(e,t,n,a)=>{let r=e&65535|0,i=e>>>16&65535|0,s=0;for(;n!==0;){s=n>2e3?2e3:n,n-=s;do r=r+t[a++]|0,i=i+r|0;while(--s);r%=65521,i%=65521}return r|i<<16|0},pi=$T,HT=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},WT=new Uint32Array(HT()),GT=(e,t,n,a)=>{let r=WT,i=a+n;e^=-1;for(let s=a;s<i;s++)e=e>>>8^r[(e^t[s])&255];return e^-1},ve=GT,Dn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Un={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:ZT,_tr_stored_block:VT,_tr_flush_block:XT,_tr_tally:an,_tr_align:YT}=UT,{Z_NO_FLUSH:$n,Z_PARTIAL_FLUSH:KT,Z_FULL_FLUSH:QT,Z_FINISH:rn,Z_BLOCK:hy,Z_OK:bt,Z_STREAM_END:vy,Z_STREAM_ERROR:Xe,Z_DATA_ERROR:JT,Z_BUF_ERROR:su,Z_DEFAULT_COMPRESSION:eR,Z_FILTERED:tR,Z_HUFFMAN_ONLY:Cs,Z_RLE:nR,Z_FIXED:aR,Z_DEFAULT_STRATEGY:rR,Z_UNKNOWN:iR,Z_DEFLATED:Ds}=Un,oR=9,sR=15,cR=8,lR=29,pR=256,xu=pR+1+lR,uR=30,dR=19,fR=2*xu+1,mR=15,M=3,tn=258,ot=tn+M+1,hR=32,Ls=42,yu=69,Is=73,js=91,qs=103,Bn=113,ti=666,pe=1,hi=2,Ln=3,Xa=4,vR=3,nn=(e,t)=>(e.msg=Dn[t],t),gy=e=>(e<<1)-(e>4?9:0),en=e=>{let t=e.length;for(;--t>=0;)e[t]=0},gR=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,on=gR,Jt=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},xe=(e,t)=>{XT(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Jt(e.strm)},G=(e,t)=>{e.pending_buf[e.pending++]=t},ei=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},bR=(e,t,n,a)=>{let r=e.avail_in;return r>a&&(r=a),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=pi(e.adler,t,r,n):e.state.wrap===2&&(e.adler=ve(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},l1=(e,t)=>{let n=e.max_chain_length,a=e.strstart,r,i,s=e.prev_length,c=e.nice_match,d=e.strstart>e.w_size-ot?e.strstart-(e.w_size-ot):0,l=e.window,u=e.w_mask,h=e.prev,m=e.strstart+tn,v=l[a+s-1],g=l[a+s];e.prev_length>=e.good_match&&(n>>=2),c>e.lookahead&&(c=e.lookahead);do if(r=t,!(l[r+s]!==g||l[r+s-1]!==v||l[r]!==l[a]||l[++r]!==l[a+1])){a+=2,r++;do;while(l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&a<m);if(i=tn-(m-a),a=m-tn,i>s){if(e.match_start=t,s=i,i>=c)break;v=l[a+s-1],g=l[a+s]}}while((t=h[t&u])>d&&--n!==0);return s<=e.lookahead?s:e.lookahead},Nn=e=>{let t=e.w_size,n,a,r,i,s;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ot)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,a=e.hash_size,n=a;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--a);a=t,n=a;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--a);i+=t}if(e.strm.avail_in===0)break;if(a=bR(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=a,e.lookahead+e.insert>=M)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=on(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=on(e,e.ins_h,e.window[s+M-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<M)););}while(e.lookahead<ot&&e.strm.avail_in!==0)},xR=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Nn(e),e.lookahead===0&&t===$n)return pe;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;let a=e.block_start+n;if((e.strstart===0||e.strstart>=a)&&(e.lookahead=e.strstart-a,e.strstart=a,xe(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-ot&&(xe(e,!1),e.strm.avail_out===0))return pe}return e.insert=0,t===rn?(xe(e,!0),e.strm.avail_out===0?Ln:Xa):(e.strstart>e.block_start&&(xe(e,!1),e.strm.avail_out===0),pe)},cu=(e,t)=>{let n,a;for(;;){if(e.lookahead<ot){if(Nn(e),e.lookahead<ot&&t===$n)return pe;if(e.lookahead===0)break}if(n=0,e.lookahead>=M&&(e.ins_h=on(e,e.ins_h,e.window[e.strstart+M-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-ot&&(e.match_length=l1(e,n)),e.match_length>=M)if(a=an(e,e.strstart-e.match_start,e.match_length-M),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=M){e.match_length--;do e.strstart++,e.ins_h=on(e,e.ins_h,e.window[e.strstart+M-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=on(e,e.ins_h,e.window[e.strstart+1]);else a=an(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(xe(e,!1),e.strm.avail_out===0))return pe}return e.insert=e.strstart<M-1?e.strstart:M-1,t===rn?(xe(e,!0),e.strm.avail_out===0?Ln:Xa):e.last_lit&&(xe(e,!1),e.strm.avail_out===0)?pe:hi},Wa=(e,t)=>{let n,a,r;for(;;){if(e.lookahead<ot){if(Nn(e),e.lookahead<ot&&t===$n)return pe;if(e.lookahead===0)break}if(n=0,e.lookahead>=M&&(e.ins_h=on(e,e.ins_h,e.window[e.strstart+M-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=M-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ot&&(e.match_length=l1(e,n),e.match_length<=5&&(e.strategy===tR||e.match_length===M&&e.strstart-e.match_start>4096)&&(e.match_length=M-1)),e.prev_length>=M&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-M,a=an(e,e.strstart-1-e.prev_match,e.prev_length-M),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=on(e,e.ins_h,e.window[e.strstart+M-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=M-1,e.strstart++,a&&(xe(e,!1),e.strm.avail_out===0))return pe}else if(e.match_available){if(a=an(e,0,e.window[e.strstart-1]),a&&xe(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return pe}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=an(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<M-1?e.strstart:M-1,t===rn?(xe(e,!0),e.strm.avail_out===0?Ln:Xa):e.last_lit&&(xe(e,!1),e.strm.avail_out===0)?pe:hi},yR=(e,t)=>{let n,a,r,i,s=e.window;for(;;){if(e.lookahead<=tn){if(Nn(e),e.lookahead<=tn&&t===$n)return pe;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=M&&e.strstart>0&&(r=e.strstart-1,a=s[r],a===s[++r]&&a===s[++r]&&a===s[++r])){i=e.strstart+tn;do;while(a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&r<i);e.match_length=tn-(i-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=M?(n=an(e,1,e.match_length-M),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=an(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(xe(e,!1),e.strm.avail_out===0))return pe}return e.insert=0,t===rn?(xe(e,!0),e.strm.avail_out===0?Ln:Xa):e.last_lit&&(xe(e,!1),e.strm.avail_out===0)?pe:hi},wR=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Nn(e),e.lookahead===0)){if(t===$n)return pe;break}if(e.match_length=0,n=an(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(xe(e,!1),e.strm.avail_out===0))return pe}return e.insert=0,t===rn?(xe(e,!0),e.strm.avail_out===0?Ln:Xa):e.last_lit&&(xe(e,!1),e.strm.avail_out===0)?pe:hi};function vt(e,t,n,a,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=a,this.func=r}var ni=[new vt(0,0,0,0,xR),new vt(4,4,8,4,cu),new vt(4,5,16,8,cu),new vt(4,6,32,32,cu),new vt(4,4,16,16,Wa),new vt(8,16,32,32,Wa),new vt(8,16,128,128,Wa),new vt(8,32,128,256,Wa),new vt(32,128,258,1024,Wa),new vt(32,258,258,4096,Wa)],_R=e=>{e.window_size=2*e.w_size,en(e.head),e.max_lazy_match=ni[e.level].max_lazy,e.good_match=ni[e.level].good_length,e.nice_match=ni[e.level].nice_length,e.max_chain_length=ni[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=M-1,e.match_available=0,e.ins_h=0};function SR(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ds,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(fR*2),this.dyn_dtree=new Uint16Array((2*uR+1)*2),this.bl_tree=new Uint16Array((2*dR+1)*2),en(this.dyn_ltree),en(this.dyn_dtree),en(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(mR+1),this.heap=new Uint16Array(2*xu+1),en(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*xu+1),en(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var p1=e=>{if(!e||!e.state)return nn(e,Xe);e.total_in=e.total_out=0,e.data_type=iR;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Ls:Bn,e.adler=t.wrap===2?0:1,t.last_flush=$n,ZT(t),bt},u1=e=>{let t=p1(e);return t===bt&&_R(e.state),t},ER=(e,t)=>!e||!e.state||e.state.wrap!==2?Xe:(e.state.gzhead=t,bt),d1=(e,t,n,a,r,i)=>{if(!e)return Xe;let s=1;if(t===eR&&(t=6),a<0?(s=0,a=-a):a>15&&(s=2,a-=16),r<1||r>oR||n!==Ds||a<8||a>15||t<0||t>9||i<0||i>aR)return nn(e,Xe);a===8&&(a=9);let c=new SR;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=a,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=r+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+M-1)/M),c.window=new Uint8Array(c.w_size*2),c.head=new Uint16Array(c.hash_size),c.prev=new Uint16Array(c.w_size),c.lit_bufsize=1<<r+6,c.pending_buf_size=c.lit_bufsize*4,c.pending_buf=new Uint8Array(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=(1+2)*c.lit_bufsize,c.level=t,c.strategy=i,c.method=n,u1(e)},kR=(e,t)=>d1(e,t,Ds,sR,cR,rR),CR=(e,t)=>{let n,a;if(!e||!e.state||t>hy||t<0)return e?nn(e,Xe):Xe;let r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===ti&&t!==rn)return nn(e,e.avail_out===0?su:Xe);r.strm=e;let i=r.last_flush;if(r.last_flush=t,r.status===Ls)if(r.wrap===2)e.adler=0,G(r,31),G(r,139),G(r,8),r.gzhead?(G(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),G(r,r.gzhead.time&255),G(r,r.gzhead.time>>8&255),G(r,r.gzhead.time>>16&255),G(r,r.gzhead.time>>24&255),G(r,r.level===9?2:r.strategy>=Cs||r.level<2?4:0),G(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(G(r,r.gzhead.extra.length&255),G(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=ve(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=yu):(G(r,0),G(r,0),G(r,0),G(r,0),G(r,0),G(r,r.level===9?2:r.strategy>=Cs||r.level<2?4:0),G(r,vR),r.status=Bn);else{let s=Ds+(r.w_bits-8<<4)<<8,c=-1;r.strategy>=Cs||r.level<2?c=0:r.level<6?c=1:r.level===6?c=2:c=3,s|=c<<6,r.strstart!==0&&(s|=hR),s+=31-s%31,r.status=Bn,ei(r,s),r.strstart!==0&&(ei(r,e.adler>>>16),ei(r,e.adler&65535)),e.adler=1}if(r.status===yu)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=ve(e.adler,r.pending_buf,r.pending-n,n)),Jt(e),n=r.pending,r.pending===r.pending_buf_size));)G(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=ve(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=Is)}else r.status=Is;if(r.status===Is)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=ve(e.adler,r.pending_buf,r.pending-n,n)),Jt(e),n=r.pending,r.pending===r.pending_buf_size)){a=1;break}r.gzindex<r.gzhead.name.length?a=r.gzhead.name.charCodeAt(r.gzindex++)&255:a=0,G(r,a)}while(a!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=ve(e.adler,r.pending_buf,r.pending-n,n)),a===0&&(r.gzindex=0,r.status=js)}else r.status=js;if(r.status===js)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=ve(e.adler,r.pending_buf,r.pending-n,n)),Jt(e),n=r.pending,r.pending===r.pending_buf_size)){a=1;break}r.gzindex<r.gzhead.comment.length?a=r.gzhead.comment.charCodeAt(r.gzindex++)&255:a=0,G(r,a)}while(a!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=ve(e.adler,r.pending_buf,r.pending-n,n)),a===0&&(r.status=qs)}else r.status=qs;if(r.status===qs&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Jt(e),r.pending+2<=r.pending_buf_size&&(G(r,e.adler&255),G(r,e.adler>>8&255),e.adler=0,r.status=Bn)):r.status=Bn),r.pending!==0){if(Jt(e),e.avail_out===0)return r.last_flush=-1,bt}else if(e.avail_in===0&&gy(t)<=gy(i)&&t!==rn)return nn(e,su);if(r.status===ti&&e.avail_in!==0)return nn(e,su);if(e.avail_in!==0||r.lookahead!==0||t!==$n&&r.status!==ti){let s=r.strategy===Cs?wR(r,t):r.strategy===nR?yR(r,t):ni[r.level].func(r,t);if((s===Ln||s===Xa)&&(r.status=ti),s===pe||s===Ln)return e.avail_out===0&&(r.last_flush=-1),bt;if(s===hi&&(t===KT?YT(r):t!==hy&&(VT(r,0,0,!1),t===QT&&(en(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Jt(e),e.avail_out===0))return r.last_flush=-1,bt}return t!==rn?bt:r.wrap<=0?vy:(r.wrap===2?(G(r,e.adler&255),G(r,e.adler>>8&255),G(r,e.adler>>16&255),G(r,e.adler>>24&255),G(r,e.total_in&255),G(r,e.total_in>>8&255),G(r,e.total_in>>16&255),G(r,e.total_in>>24&255)):(ei(r,e.adler>>>16),ei(r,e.adler&65535)),Jt(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?bt:vy)},TR=e=>{if(!e||!e.state)return Xe;let t=e.state.status;return t!==Ls&&t!==yu&&t!==Is&&t!==js&&t!==qs&&t!==Bn&&t!==ti?nn(e,Xe):(e.state=null,t===Bn?nn(e,JT):bt)},RR=(e,t)=>{let n=t.length;if(!e||!e.state)return Xe;let a=e.state,r=a.wrap;if(r===2||r===1&&a.status!==Ls||a.lookahead)return Xe;if(r===1&&(e.adler=pi(e.adler,t,n,0)),a.wrap=0,n>=a.w_size){r===0&&(en(a.head),a.strstart=0,a.block_start=0,a.insert=0);let d=new Uint8Array(a.w_size);d.set(t.subarray(n-a.w_size,n),0),t=d,n=a.w_size}let i=e.avail_in,s=e.next_in,c=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Nn(a);a.lookahead>=M;){let d=a.strstart,l=a.lookahead-(M-1);do a.ins_h=on(a,a.ins_h,a.window[d+M-1]),a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++;while(--l);a.strstart=d,a.lookahead=M-1,Nn(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=M-1,a.match_available=0,e.next_in=s,e.input=c,e.avail_in=i,a.wrap=r,bt},AR=kR,PR=d1,OR=u1,IR=p1,jR=ER,qR=CR,FR=TR,zR=RR,BR="pako deflate (from Nodeca project)",ri={deflateInit:AR,deflateInit2:PR,deflateReset:OR,deflateResetKeep:IR,deflateSetHeader:jR,deflate:qR,deflateEnd:FR,deflateSetDictionary:zR,deflateInfo:BR},DR=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),LR=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(!!n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(let a in n)DR(n,a)&&(e[a]=n[a])}}return e},NR=e=>{let t=0;for(let a=0,r=e.length;a<r;a++)t+=e[a].length;let n=new Uint8Array(t);for(let a=0,r=0,i=e.length;a<i;a++){let s=e[a];n.set(s,r),r+=s.length}return n},Ns={assign:LR,flattenChunks:NR},f1=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f1=!1}var ui=new Uint8Array(256);for(let e=0;e<256;e++)ui[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ui[254]=ui[254]=1;var MR=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,a,r,i,s=e.length,c=0;for(r=0;r<s;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<s&&(a=e.charCodeAt(r+1),(a&64512)===56320&&(n=65536+(n-55296<<10)+(a-56320),r++)),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(c),i=0,r=0;i<c;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<s&&(a=e.charCodeAt(r+1),(a&64512)===56320&&(n=65536+(n-55296<<10)+(a-56320),r++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|n&63):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|n&63):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|n&63);return t},UR=(e,t)=>{if(t<65534&&e.subarray&&f1)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n},$R=(e,t)=>{let n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let a,r,i=new Array(n*2);for(r=0,a=0;a<n;){let s=e[a++];if(s<128){i[r++]=s;continue}let c=ui[s];if(c>4){i[r++]=65533,a+=c-1;continue}for(s&=c===2?31:c===3?15:7;c>1&&a<n;)s=s<<6|e[a++]&63,c--;if(c>1){i[r++]=65533;continue}s<65536?i[r++]=s:(s-=65536,i[r++]=55296|s>>10&1023,i[r++]=56320|s&1023)}return UR(i,r)},HR=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+ui[e[n]]>t?n:t},di={string2buf:MR,buf2string:$R,utf8border:HR};function WR(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var m1=WR,h1=Object.prototype.toString,{Z_NO_FLUSH:GR,Z_SYNC_FLUSH:ZR,Z_FULL_FLUSH:VR,Z_FINISH:XR,Z_OK:zs,Z_STREAM_END:YR,Z_DEFAULT_COMPRESSION:KR,Z_DEFAULT_STRATEGY:QR,Z_DEFLATED:JR}=Un;function vi(e){this.options=Ns.assign({level:KR,method:JR,chunkSize:16384,windowBits:15,memLevel:8,strategy:QR},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m1,this.strm.avail_out=0;let n=ri.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==zs)throw new Error(Dn[n]);if(t.header&&ri.deflateSetHeader(this.strm,t.header),t.dictionary){let a;if(typeof t.dictionary=="string"?a=di.string2buf(t.dictionary):h1.call(t.dictionary)==="[object ArrayBuffer]"?a=new Uint8Array(t.dictionary):a=t.dictionary,n=ri.deflateSetDictionary(this.strm,a),n!==zs)throw new Error(Dn[n]);this._dict_set=!0}}vi.prototype.push=function(e,t){let n=this.strm,a=this.options.chunkSize,r,i;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?XR:GR,typeof e=="string"?n.input=di.string2buf(e):h1.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),(i===ZR||i===VR)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=ri.deflate(n,i),r===YR)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=ri.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===zs;if(n.avail_out===0){this.onData(n.output);continue}if(i>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};vi.prototype.onData=function(e){this.chunks.push(e)};vi.prototype.onEnd=function(e){e===zs&&(this.result=Ns.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ku(e,t){let n=new vi(t);if(n.push(e,!0),n.err)throw n.msg||Dn[n.err];return n.result}function eA(e,t){return t=t||{},t.raw=!0,ku(e,t)}function tA(e,t){return t=t||{},t.gzip=!0,ku(e,t)}var nA=vi,aA=ku,rA=eA,iA=tA,oA=Un,sA={Deflate:nA,deflate:aA,deflateRaw:rA,gzip:iA,constants:oA},Ts=30,cA=12,lA=function(t,n){let a,r,i,s,c,d,l,u,h,m,v,g,x,y,_,C,R,E,A,O,P,q,B,F,j=t.state;a=t.next_in,B=t.input,r=a+(t.avail_in-5),i=t.next_out,F=t.output,s=i-(n-t.avail_out),c=i+(t.avail_out-257),d=j.dmax,l=j.wsize,u=j.whave,h=j.wnext,m=j.window,v=j.hold,g=j.bits,x=j.lencode,y=j.distcode,_=(1<<j.lenbits)-1,C=(1<<j.distbits)-1;e:do{g<15&&(v+=B[a++]<<g,g+=8,v+=B[a++]<<g,g+=8),R=x[v&_];t:for(;;){if(E=R>>>24,v>>>=E,g-=E,E=R>>>16&255,E===0)F[i++]=R&65535;else if(E&16){A=R&65535,E&=15,E&&(g<E&&(v+=B[a++]<<g,g+=8),A+=v&(1<<E)-1,v>>>=E,g-=E),g<15&&(v+=B[a++]<<g,g+=8,v+=B[a++]<<g,g+=8),R=y[v&C];n:for(;;){if(E=R>>>24,v>>>=E,g-=E,E=R>>>16&255,E&16){if(O=R&65535,E&=15,g<E&&(v+=B[a++]<<g,g+=8,g<E&&(v+=B[a++]<<g,g+=8)),O+=v&(1<<E)-1,O>d){t.msg="invalid distance too far back",j.mode=Ts;break e}if(v>>>=E,g-=E,E=i-s,O>E){if(E=O-E,E>u&&j.sane){t.msg="invalid distance too far back",j.mode=Ts;break e}if(P=0,q=m,h===0){if(P+=l-E,E<A){A-=E;do F[i++]=m[P++];while(--E);P=i-O,q=F}}else if(h<E){if(P+=l+h-E,E-=h,E<A){A-=E;do F[i++]=m[P++];while(--E);if(P=0,h<A){E=h,A-=E;do F[i++]=m[P++];while(--E);P=i-O,q=F}}}else if(P+=h-E,E<A){A-=E;do F[i++]=m[P++];while(--E);P=i-O,q=F}for(;A>2;)F[i++]=q[P++],F[i++]=q[P++],F[i++]=q[P++],A-=3;A&&(F[i++]=q[P++],A>1&&(F[i++]=q[P++]))}else{P=i-O;do F[i++]=F[P++],F[i++]=F[P++],F[i++]=F[P++],A-=3;while(A>2);A&&(F[i++]=F[P++],A>1&&(F[i++]=F[P++]))}}else if((E&64)===0){R=y[(R&65535)+(v&(1<<E)-1)];continue n}else{t.msg="invalid distance code",j.mode=Ts;break e}break}}else if((E&64)===0){R=x[(R&65535)+(v&(1<<E)-1)];continue t}else if(E&32){j.mode=cA;break e}else{t.msg="invalid literal/length code",j.mode=Ts;break e}break}}while(a<r&&i<c);A=g>>3,a-=A,g-=A<<3,v&=(1<<g)-1,t.next_in=a,t.next_out=i,t.avail_in=a<r?5+(r-a):5-(a-r),t.avail_out=i<c?257+(c-i):257-(i-c),j.hold=v,j.bits=g},Ga=15,by=852,xy=592,yy=0,lu=1,wy=2,pA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),uA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),fA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),mA=(e,t,n,a,r,i,s,c)=>{let d=c.bits,l=0,u=0,h=0,m=0,v=0,g=0,x=0,y=0,_=0,C=0,R,E,A,O,P,q=null,B=0,F,j=new Uint16Array(Ga+1),ie=new Uint16Array(Ga+1),le=null,ke=0,Ce,Te,It;for(l=0;l<=Ga;l++)j[l]=0;for(u=0;u<a;u++)j[t[n+u]]++;for(v=d,m=Ga;m>=1&&j[m]===0;m--);if(v>m&&(v=m),m===0)return r[i++]=1<<24|64<<16|0,r[i++]=1<<24|64<<16|0,c.bits=1,0;for(h=1;h<m&&j[h]===0;h++);for(v<h&&(v=h),y=1,l=1;l<=Ga;l++)if(y<<=1,y-=j[l],y<0)return-1;if(y>0&&(e===yy||m!==1))return-1;for(ie[1]=0,l=1;l<Ga;l++)ie[l+1]=ie[l]+j[l];for(u=0;u<a;u++)t[n+u]!==0&&(s[ie[t[n+u]]++]=u);if(e===yy?(q=le=s,F=19):e===lu?(q=pA,B-=257,le=uA,ke-=257,F=256):(q=dA,le=fA,F=-1),C=0,u=0,l=h,P=i,g=v,x=0,A=-1,_=1<<v,O=_-1,e===lu&&_>by||e===wy&&_>xy)return 1;for(;;){Ce=l-x,s[u]<F?(Te=0,It=s[u]):s[u]>F?(Te=le[ke+s[u]],It=q[B+s[u]]):(Te=32+64,It=0),R=1<<l-x,E=1<<g,h=E;do E-=R,r[P+(C>>x)+E]=Ce<<24|Te<<16|It|0;while(E!==0);for(R=1<<l-1;C&R;)R>>=1;if(R!==0?(C&=R-1,C+=R):C=0,u++,--j[l]===0){if(l===m)break;l=t[n+s[u]]}if(l>v&&(C&O)!==A){for(x===0&&(x=v),P+=h,g=l-x,y=1<<g;g+x<m&&(y-=j[g+x],!(y<=0));)g++,y<<=1;if(_+=1<<g,e===lu&&_>by||e===wy&&_>xy)return 1;A=C&O,r[A]=v<<24|g<<16|P-i|0}}return C!==0&&(r[P+C]=l-x<<24|64<<16|0),c.bits=v,0},ii=mA,hA=0,v1=1,g1=2,{Z_FINISH:_y,Z_BLOCK:vA,Z_TREES:Rs,Z_OK:Mn,Z_STREAM_END:gA,Z_NEED_DICT:bA,Z_STREAM_ERROR:Ye,Z_DATA_ERROR:b1,Z_MEM_ERROR:x1,Z_BUF_ERROR:xA,Z_DEFLATED:Sy}=Un,y1=1,Ey=2,ky=3,Cy=4,Ty=5,Ry=6,Ay=7,Py=8,Oy=9,Iy=10,Bs=11,At=12,pu=13,jy=14,uu=15,qy=16,Fy=17,zy=18,By=19,As=20,Ps=21,Dy=22,Ly=23,Ny=24,My=25,Uy=26,du=27,$y=28,Hy=29,ne=30,w1=31,yA=32,wA=852,_A=592,SA=15,EA=SA,Wy=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function kA(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var _1=e=>{if(!e||!e.state)return Ye;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=y1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(wA),t.distcode=t.distdyn=new Int32Array(_A),t.sane=1,t.back=-1,Mn},S1=e=>{if(!e||!e.state)return Ye;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,_1(e)},E1=(e,t)=>{let n;if(!e||!e.state)return Ye;let a=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Ye:(a.window!==null&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,S1(e))},k1=(e,t)=>{if(!e)return Ye;let n=new kA;e.state=n,n.window=null;let a=E1(e,t);return a!==Mn&&(e.state=null),a},CA=e=>k1(e,EA),Gy=!0,fu,mu,TA=e=>{if(Gy){fu=new Int32Array(512),mu=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ii(v1,e.lens,0,288,fu,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ii(g1,e.lens,0,32,mu,0,e.work,{bits:5}),Gy=!1}e.lencode=fu,e.lenbits=9,e.distcode=mu,e.distbits=5},C1=(e,t,n,a)=>{let r,i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(r=i.wsize-i.wnext,r>a&&(r=a),i.window.set(t.subarray(n-a,n-a+r),i.wnext),a-=r,a?(i.window.set(t.subarray(n-a,n),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=r,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=r))),0},RA=(e,t)=>{let n,a,r,i,s,c,d,l,u,h,m,v,g,x,y=0,_,C,R,E,A,O,P,q,B=new Uint8Array(4),F,j,ie=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Ye;n=e.state,n.mode===At&&(n.mode=pu),s=e.next_out,r=e.output,d=e.avail_out,i=e.next_in,a=e.input,c=e.avail_in,l=n.hold,u=n.bits,h=c,m=d,q=Mn;e:for(;;)switch(n.mode){case y1:if(n.wrap===0){n.mode=pu;break}for(;u<16;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}if(n.wrap&2&&l===35615){n.check=0,B[0]=l&255,B[1]=l>>>8&255,n.check=ve(n.check,B,2,0),l=0,u=0,n.mode=Ey;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=ne;break}if((l&15)!==Sy){e.msg="unknown compression method",n.mode=ne;break}if(l>>>=4,u-=4,P=(l&15)+8,n.wbits===0)n.wbits=P;else if(P>n.wbits){e.msg="invalid window size",n.mode=ne;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=l&512?Iy:At,l=0,u=0;break;case Ey:for(;u<16;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}if(n.flags=l,(n.flags&255)!==Sy){e.msg="unknown compression method",n.mode=ne;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=ne;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&(B[0]=l&255,B[1]=l>>>8&255,n.check=ve(n.check,B,2,0)),l=0,u=0,n.mode=ky;case ky:for(;u<32;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}n.head&&(n.head.time=l),n.flags&512&&(B[0]=l&255,B[1]=l>>>8&255,B[2]=l>>>16&255,B[3]=l>>>24&255,n.check=ve(n.check,B,4,0)),l=0,u=0,n.mode=Cy;case Cy:for(;u<16;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&(B[0]=l&255,B[1]=l>>>8&255,n.check=ve(n.check,B,2,0)),l=0,u=0,n.mode=Ty;case Ty:if(n.flags&1024){for(;u<16;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&(B[0]=l&255,B[1]=l>>>8&255,n.check=ve(n.check,B,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=Ry;case Ry:if(n.flags&1024&&(v=n.length,v>c&&(v=c),v&&(n.head&&(P=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(a.subarray(i,i+v),P)),n.flags&512&&(n.check=ve(n.check,a,v,i)),c-=v,i+=v,n.length-=v),n.length))break e;n.length=0,n.mode=Ay;case Ay:if(n.flags&2048){if(c===0)break e;v=0;do P=a[i+v++],n.head&&P&&n.length<65536&&(n.head.name+=String.fromCharCode(P));while(P&&v<c);if(n.flags&512&&(n.check=ve(n.check,a,v,i)),c-=v,i+=v,P)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Py;case Py:if(n.flags&4096){if(c===0)break e;v=0;do P=a[i+v++],n.head&&P&&n.length<65536&&(n.head.comment+=String.fromCharCode(P));while(P&&v<c);if(n.flags&512&&(n.check=ve(n.check,a,v,i)),c-=v,i+=v,P)break e}else n.head&&(n.head.comment=null);n.mode=Oy;case Oy:if(n.flags&512){for(;u<16;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}if(l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=ne;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=At;break;case Iy:for(;u<32;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}e.adler=n.check=Wy(l),l=0,u=0,n.mode=Bs;case Bs:if(n.havedict===0)return e.next_out=s,e.avail_out=d,e.next_in=i,e.avail_in=c,n.hold=l,n.bits=u,bA;e.adler=n.check=1,n.mode=At;case At:if(t===vA||t===Rs)break e;case pu:if(n.last){l>>>=u&7,u-=u&7,n.mode=du;break}for(;u<3;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}switch(n.last=l&1,l>>>=1,u-=1,l&3){case 0:n.mode=jy;break;case 1:if(TA(n),n.mode=As,t===Rs){l>>>=2,u-=2;break e}break;case 2:n.mode=Fy;break;case 3:e.msg="invalid block type",n.mode=ne}l>>>=2,u-=2;break;case jy:for(l>>>=u&7,u-=u&7;u<32;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=ne;break}if(n.length=l&65535,l=0,u=0,n.mode=uu,t===Rs)break e;case uu:n.mode=qy;case qy:if(v=n.length,v){if(v>c&&(v=c),v>d&&(v=d),v===0)break e;r.set(a.subarray(i,i+v),s),c-=v,i+=v,d-=v,s+=v,n.length-=v;break}n.mode=At;break;case Fy:for(;u<14;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}if(n.nlen=(l&31)+257,l>>>=5,u-=5,n.ndist=(l&31)+1,l>>>=5,u-=5,n.ncode=(l&15)+4,l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=ne;break}n.have=0,n.mode=zy;case zy:for(;n.have<n.ncode;){for(;u<3;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}n.lens[ie[n.have++]]=l&7,l>>>=3,u-=3}for(;n.have<19;)n.lens[ie[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},q=ii(hA,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,q){e.msg="invalid code lengths set",n.mode=ne;break}n.have=0,n.mode=By;case By:for(;n.have<n.nlen+n.ndist;){for(;y=n.lencode[l&(1<<n.lenbits)-1],_=y>>>24,C=y>>>16&255,R=y&65535,!(_<=u);){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}if(R<16)l>>>=_,u-=_,n.lens[n.have++]=R;else{if(R===16){for(j=_+2;u<j;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}if(l>>>=_,u-=_,n.have===0){e.msg="invalid bit length repeat",n.mode=ne;break}P=n.lens[n.have-1],v=3+(l&3),l>>>=2,u-=2}else if(R===17){for(j=_+3;u<j;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}l>>>=_,u-=_,P=0,v=3+(l&7),l>>>=3,u-=3}else{for(j=_+7;u<j;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}l>>>=_,u-=_,P=0,v=11+(l&127),l>>>=7,u-=7}if(n.have+v>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=ne;break}for(;v--;)n.lens[n.have++]=P}}if(n.mode===ne)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=ne;break}if(n.lenbits=9,F={bits:n.lenbits},q=ii(v1,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,q){e.msg="invalid literal/lengths set",n.mode=ne;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},q=ii(g1,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,q){e.msg="invalid distances set",n.mode=ne;break}if(n.mode=As,t===Rs)break e;case As:n.mode=Ps;case Ps:if(c>=6&&d>=258){e.next_out=s,e.avail_out=d,e.next_in=i,e.avail_in=c,n.hold=l,n.bits=u,lA(e,m),s=e.next_out,r=e.output,d=e.avail_out,i=e.next_in,a=e.input,c=e.avail_in,l=n.hold,u=n.bits,n.mode===At&&(n.back=-1);break}for(n.back=0;y=n.lencode[l&(1<<n.lenbits)-1],_=y>>>24,C=y>>>16&255,R=y&65535,!(_<=u);){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}if(C&&(C&240)===0){for(E=_,A=C,O=R;y=n.lencode[O+((l&(1<<E+A)-1)>>E)],_=y>>>24,C=y>>>16&255,R=y&65535,!(E+_<=u);){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}l>>>=E,u-=E,n.back+=E}if(l>>>=_,u-=_,n.back+=_,n.length=R,C===0){n.mode=Uy;break}if(C&32){n.back=-1,n.mode=At;break}if(C&64){e.msg="invalid literal/length code",n.mode=ne;break}n.extra=C&15,n.mode=Dy;case Dy:if(n.extra){for(j=n.extra;u<j;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Ly;case Ly:for(;y=n.distcode[l&(1<<n.distbits)-1],_=y>>>24,C=y>>>16&255,R=y&65535,!(_<=u);){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}if((C&240)===0){for(E=_,A=C,O=R;y=n.distcode[O+((l&(1<<E+A)-1)>>E)],_=y>>>24,C=y>>>16&255,R=y&65535,!(E+_<=u);){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}l>>>=E,u-=E,n.back+=E}if(l>>>=_,u-=_,n.back+=_,C&64){e.msg="invalid distance code",n.mode=ne;break}n.offset=R,n.extra=C&15,n.mode=Ny;case Ny:if(n.extra){for(j=n.extra;u<j;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=ne;break}n.mode=My;case My:if(d===0)break e;if(v=m-d,n.offset>v){if(v=n.offset-v,v>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=ne;break}v>n.wnext?(v-=n.wnext,g=n.wsize-v):g=n.wnext-v,v>n.length&&(v=n.length),x=n.window}else x=r,g=s-n.offset,v=n.length;v>d&&(v=d),d-=v,n.length-=v;do r[s++]=x[g++];while(--v);n.length===0&&(n.mode=Ps);break;case Uy:if(d===0)break e;r[s++]=n.length,d--,n.mode=Ps;break;case du:if(n.wrap){for(;u<32;){if(c===0)break e;c--,l|=a[i++]<<u,u+=8}if(m-=d,e.total_out+=m,n.total+=m,m&&(e.adler=n.check=n.flags?ve(n.check,r,m,s-m):pi(n.check,r,m,s-m)),m=d,(n.flags?l:Wy(l))!==n.check){e.msg="incorrect data check",n.mode=ne;break}l=0,u=0}n.mode=$y;case $y:if(n.wrap&&n.flags){for(;u<32;){if(c===0)break e;c--,l+=a[i++]<<u,u+=8}if(l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=ne;break}l=0,u=0}n.mode=Hy;case Hy:q=gA;break e;case ne:q=b1;break e;case w1:return x1;case yA:default:return Ye}return e.next_out=s,e.avail_out=d,e.next_in=i,e.avail_in=c,n.hold=l,n.bits=u,(n.wsize||m!==e.avail_out&&n.mode<ne&&(n.mode<du||t!==_y))&&C1(e,e.output,e.next_out,m-e.avail_out),h-=e.avail_in,m-=e.avail_out,e.total_in+=h,e.total_out+=m,n.total+=m,n.wrap&&m&&(e.adler=n.check=n.flags?ve(n.check,r,m,e.next_out-m):pi(n.check,r,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===At?128:0)+(n.mode===As||n.mode===uu?256:0),(h===0&&m===0||t===_y)&&q===Mn&&(q=xA),q},AA=e=>{if(!e||!e.state)return Ye;let t=e.state;return t.window&&(t.window=null),e.state=null,Mn},PA=(e,t)=>{if(!e||!e.state)return Ye;let n=e.state;return(n.wrap&2)===0?Ye:(n.head=t,t.done=!1,Mn)},OA=(e,t)=>{let n=t.length,a,r,i;return!e||!e.state||(a=e.state,a.wrap!==0&&a.mode!==Bs)?Ye:a.mode===Bs&&(r=1,r=pi(r,t,n,0),r!==a.check)?b1:(i=C1(e,t,n,n),i?(a.mode=w1,x1):(a.havedict=1,Mn))},IA=S1,jA=E1,qA=_1,FA=CA,zA=k1,BA=RA,DA=AA,LA=PA,NA=OA,MA="pako inflate (from Nodeca project)",Ot={inflateReset:IA,inflateReset2:jA,inflateResetKeep:qA,inflateInit:FA,inflateInit2:zA,inflate:BA,inflateEnd:DA,inflateGetHeader:LA,inflateSetDictionary:NA,inflateInfo:MA};function UA(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var $A=UA,T1=Object.prototype.toString,{Z_NO_FLUSH:HA,Z_FINISH:WA,Z_OK:fi,Z_STREAM_END:hu,Z_NEED_DICT:vu,Z_STREAM_ERROR:GA,Z_DATA_ERROR:Zy,Z_MEM_ERROR:ZA}=Un;function gi(e){this.options=Ns.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m1,this.strm.avail_out=0;let n=Ot.inflateInit2(this.strm,t.windowBits);if(n!==fi)throw new Error(Dn[n]);if(this.header=new $A,Ot.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=di.string2buf(t.dictionary):T1.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ot.inflateSetDictionary(this.strm,t.dictionary),n!==fi)))throw new Error(Dn[n])}gi.prototype.push=function(e,t){let n=this.strm,a=this.options.chunkSize,r=this.options.dictionary,i,s,c;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?WA:HA,T1.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),i=Ot.inflate(n,s),i===vu&&r&&(i=Ot.inflateSetDictionary(n,r),i===fi?i=Ot.inflate(n,s):i===Zy&&(i=vu));n.avail_in>0&&i===hu&&n.state.wrap>0&&e[n.next_in]!==0;)Ot.inflateReset(n),i=Ot.inflate(n,s);switch(i){case GA:case Zy:case vu:case ZA:return this.onEnd(i),this.ended=!0,!1}if(c=n.avail_out,n.next_out&&(n.avail_out===0||i===hu))if(this.options.to==="string"){let d=di.utf8border(n.output,n.next_out),l=n.next_out-d,u=di.buf2string(n.output,d);n.next_out=l,n.avail_out=a-l,l&&n.output.set(n.output.subarray(d,d+l),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(i===fi&&c===0)){if(i===hu)return i=Ot.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};gi.prototype.onData=function(e){this.chunks.push(e)};gi.prototype.onEnd=function(e){e===fi&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ns.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Cu(e,t){let n=new gi(t);if(n.push(e),n.err)throw n.msg||Dn[n.err];return n.result}function VA(e,t){return t=t||{},t.raw=!0,Cu(e,t)}var XA=gi,YA=Cu,KA=VA,QA=Cu,JA=Un,e9={Inflate:XA,inflate:YA,inflateRaw:KA,ungzip:QA,constants:JA},{Deflate:t9,deflate:n9,deflateRaw:a9,gzip:r9}=sA,{Inflate:i9,inflate:o9,inflateRaw:s9,ungzip:c9}=e9,l9=t9,p9=n9,u9=a9,d9=r9,f9=i9,m9=o9,h9=s9,v9=c9,g9=Un,R1={Deflate:l9,deflate:p9,deflateRaw:u9,gzip:d9,Inflate:f9,inflate:m9,inflateRaw:h9,ungzip:v9,constants:g9};var Ru=U(require("path"));var Tu=(0,A1.default)("mini-proxy:download");async function P1(e,t){let n=await b9(t),a=x9(t,n);await Ms.default.mkdir(a,{recursive:!0});let r=O1(e),i=`query-engine-${e}${r}`,s=Ru.default.join(a,i);return await Em(s)||await y9(e,n,s),s}async function b9(e){let t=await Fn(`https://registry.npmjs.org/@prisma/client/${e}`);if(!t.ok)throw new Error(`Couldn't fetch package.json from npm registry, status code: ${t.status}`);let a=(await t.json()).dependencies["@prisma/engines-version"];Tu("version: %s, engines: %s",e,a);let r=a.split("."),i=r[r.length-1];return Tu("commit: %s",i),i}function x9(e,t){return Ru.default.join(oo,".cache",e,t)}function O1(e){return e==="windows"?".exe":""}async function y9(e,t,n){let a=O1(e),r=`https://binaries.prisma.sh/all_commits/${t}/${e}/query-engine${a}.gz`;Tu("downloading from %s",r);let i=await Fn(r);if(!i.ok)throw new Error(`Couldn't download engine. URL: ${r}, status code: ${i.status}`);let s=R1.inflate(await i.arrayBuffer());await Ms.default.writeFile(n,s),await Ms.default.chmod(n,"755")}var z1=(0,q1.default)("mini-proxy:engine");function B1({schemaHash:e,clientVersion:t}){return`${e}:${t}`}var Au=new Map;function Us(e){return Au.get(B1(e))}async function w9(e){if(e.staticEnginePath)return e.staticEnginePath;if(!e.platform)throw new Error("Either staticEnginePath or platform must be specified");return P1(e.platform,e.version)}async function $s(e){let t=await w9(e),n=B1({clientVersion:e.version,schemaHash:e.schema.hash}),a=Au.get(n);return(a==null?void 0:a.options.databaseUrl)!==e.databaseUrl&&(z1("engine changed url from %s to %s",a==null?void 0:a.options.databaseUrl,e.databaseUrl),await(a==null?void 0:a.stop()),a=void 0),a===void 0&&(a=new Pu({engineId:n,enginePath:t,databaseUrl:e.databaseUrl,datasourceEnvVar:e.envVar,schema:e.schema}),Au.set(n,a)),a}var I1=6e4,Pu=class{constructor(t){this.options=t;this.runningEnginePromise=null;this.idleTimeoutDuration=I1;this.idleTimer=null;this.knownActiveTransactions=0;this._idleCallback=()=>{this.debug("idle callback"),this.stop()};this.debug=z1.extend(t.engineId)}async request(t,n){let a=await this.getRunningEngine();this.resetIdleTimeout(),this.debug("sending request to",a.url);let r=await this.performHttpRequest(a.url,{method:"POST",headers:{...n,"Content-Type":"application/json"},body:t}),i=await r.text();if(r.ok)return i;throw await Me.fromResponse(r)}async startTransaction(t,n){let a=await this.getRunningEngine();this.idleTimeoutDuration=Math.max(this.idleTimeoutDuration,t.timeout),this.knownActiveTransactions++,this.resetIdleTimeout();let r=await this.performHttpRequest(`${a.url}/transaction/start`,{method:"POST",headers:{...n,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw await Me.fromResponse(r);let i=await r.json();return this.debug("started transaction:",i),i}async commitTransaction(t,n){return this.finishTransaction(t,"commit",n)}async rollbackTransaction(t,n){return this.finishTransaction(t,"rollback",n)}async finishTransaction(t,n,a){let r=await this.getRunningEngine();this.knownActiveTransactions=Math.max(0,this.knownActiveTransactions-1),this.knownActiveTransactions===0&&(this.idleTimeoutDuration=I1),this.resetIdleTimeout();let i=await this.performHttpRequest(`${r.url}/transaction/${t}/${n}`,{method:"POST",headers:{...a,"Content-Type":"application/json"}});if(i.ok)this.debug("finished transaction %s with action %s",t,n);else throw await Me.fromResponse(i);let s={};try{s=await i.json()}catch(c){this.debug(c)}return s}async performHttpRequest(t,{headers:n,...a}){return n&&(n=Object.fromEntries(Object.entries(n).filter(([r,i])=>i!==void 0))),Fn(t,{headers:n,...a})}async getRunningEngine(){if(this.runningEnginePromise)return this.runningEnginePromise;let t=["--enable-raw-queries","--enable-telemetry-in-response","--port","0"],n={...process.env,PRISMA_DML:this.options.schema.base64,RUST_BACKTRACE:process.env.RUST_BACKTRACE??"1",RUST_LOG:process.env.RUST_LOG??"info",[this.options.datasourceEnvVar]:this.options.databaseUrl,LOG_QUERIES:"y",QE_LOG_LEVEL:"TRACE"};this.debug("starting new engine");let a=(0,j1.spawn)(this.options.enginePath,t,{env:n,windowsHide:!0,stdio:["ignore","pipe","pipe"]});return a.stdout.setEncoding("utf-8"),a.stderr.setEncoding("utf-8"),this.runningEnginePromise=new Promise((r,i)=>{a.on("error",c=>{this.debug("error:",c),this.runningEnginePromise=null,this.options.schema.deleteFromRegistry(),i(new sn(String(c)))}),a.on("exit",(c,d)=>{this.debug("child exited with code",c,"and signal",d),this.runningEnginePromise=null,this.options.schema.deleteFromRegistry(),i(new sn(`Query Engine exited with code ${c} and signal ${d}`))});let s=c=>{if(c.includes("Started query engine http server")){a.stdout.removeListener("data",s);let d=c.split(`
 `).filter(m=>m.includes("Started query engine http server"))[0],l=JSON.parse(d);if(l.fields===void 0){i(new Error(`Unexpected data during initialization, "fields" are missing: ${c}`));return}let{ip:u,port:h}=l.fields;if(u===void 0||h===void 0){i(new Error(`This version of query-engine is not compatible with mini-proxy, "ip" and "port" are missing in the startup log entry. Use mini-proxy@0.6 with query-engine revisions before 8a19c38770eeb2b3dbc148889c218fd0df6159a7.
 Received data: ${c}`));return}r({child:a,url:`http://${u}:${h}`})}};a.stdout.on("data",c=>{this.debug("stdout:",c)}),a.stdout.on("data",s),a.stderr.on("data",c=>{this.debug("stderr:",c)})}),this.runningEnginePromise}async stop(){if(this.debug("stopping"),!this.runningEnginePromise){this.debug("already stopped");return}this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null);let{child:t}=await this.runningEnginePromise;if(this.runningEnginePromise=null,t.exitCode!==null||t.signalCode!==null){this.debug("child already exited with code",t.exitCode,"and signal",t.signalCode);return}t.kill(),this.debug("waiting for the child to exit..."),await F1.default.once(t,"exit")}resetIdleTimeout(){!this.idleTimer||(clearTimeout(this.idleTimer),this.idleTimer=setTimeout(this._idleCallback,this.idleTimeoutDuration))}},sn=class extends Error{constructor(){super(...arguments);this.name="EngineStartError"}},Me=class extends Error{constructor(n,a,r){super(`${n}: Query Engine response status ${a}, body: ${r}`);this.action=n;this.statusCode=a;this.responseBody=r;this.name="QueryEngineHttpError"}static async fromResponse(n){return new Me(new URL(n.url).pathname,n.status,await n.text())}};var D1=U(require("crypto")),Ou=new Map,Hs=class{constructor(t){this.base64=t,this.hash=D1.default.createHash("sha256").update(t).digest("hex")}addToRegistry(){Ou.set(this.hash,this)}deleteFromRegistry(){Ou.delete(this.hash)}};function Ws(e){return Ou.get(e)}var ce=(0,N1.default)("mini-proxy:server"),$1={port:4477,ca:la.caCert,key:la.key,cert:la.cert};function _9(e){let t=(0,M1.default)(),n=new WeakMap;return t.use((a,r,i)=>{let s=a.header("authorization");if(!s){r.status(401).end();return}let c=s.split(" ")[1];if(!c){r.status(400).end();return}let d=co(c);if(!d){r.status(401).end();return}n.set(a,d),i()}),t.use(L1.default.text({type:"*/*",limit:"10mb"})),t.put("/:clientVersion/:schemaHash/schema",(a,r)=>{let i=a.body,s=a.params.schemaHash,c=new Hs(i);s!==c.hash?r.status(500).send("hashes do not match"):(c.addToRegistry(),ce("schema uploaded: %s",s),r.send(s))}),t.post("/:clientVersion/:schemaHash/graphql",async(a,r)=>{let i=a.body,s=a.params.schemaHash,c=Ws(s);if(ce("query: %s",i),!c){ce("schema missing: %s",s),r.status(404).send(JSON.stringify({EngineNotStarted:{reason:"SchemaMissing"}}));return}let d=n.get(a);if(!d){ce("missing key contents in context for request"),r.status(500).end();return}let l="";try{l=await(await $s({schema:c,version:a.params.clientVersion,databaseUrl:d.url,staticEnginePath:e.queryEngine,platform:e.platform,envVar:d.envVar})).request(i,{traceparent:a.header("traceparent"),"X-capture-telemetry":a.header("X-capture-telemetry")})}catch(u){ce("error:",u),u instanceof sn?r.status(500).send(JSON.stringify({EngineNotStarted:{reason:{EngineStartupError:{msg:u.message,logs:[]}}}})):u instanceof Me?r.status(u.statusCode).send(u.responseBody):r.status(500).end();return}ce("result:",l),r.send(l)}),t.post("/:clientVersion/:schemaHash/itx/:itxId/graphql",async(a,r)=>{let i=a.params.itxId,s=a.body,c=a.params.schemaHash,d=Ws(c);if(ce(`itx query: %s 
- itxId: %s `,s,i),!d){ce("schema missing: %s",c),r.status(404).send(JSON.stringify({EngineNotStarted:{reason:"SchemaMissing"}}));return}let l=n.get(a);if(!l){ce("missing key contents in context for request"),r.status(500).end();return}let u="";try{u=await(await $s({schema:d,version:a.params.clientVersion,databaseUrl:l.url,staticEnginePath:e.queryEngine,platform:e.platform,envVar:l.envVar})).request(s,{"X-transaction-id":i,traceparent:a.header("traceparent"),"X-capture-telemetry":a.header("X-capture-telemetry")})}catch(h){ce("error:",h),h instanceof sn?r.status(500).send(JSON.stringify({EngineNotStarted:{reason:{EngineStartupError:{msg:h.message,logs:[]}}}})):h instanceof Me?r.status(h.statusCode).send(h.responseBody):r.status(500).end();return}ce("itx result:",u),r.send(u)}),t.post("/:clientVersion/:schemaHash/transaction/start",async(a,r)=>{let i=Ws(a.params.schemaHash);if(!i){ce("schema missing: %s",a.params.schemaHash),r.status(404).json({EngineNotStarted:{reason:"SchemaMissing"}});return}let s=n.get(a);if(!s){ce("missing key contents in context for request"),r.status(500).end();return}ce("transaction start",a.params);let c=`localhost:${e.port}`,d=a.params.clientVersion,l=a.params.schemaHash;try{let h=await(await $s({schema:i,version:a.params.clientVersion,databaseUrl:s.url,staticEnginePath:e.queryEngine,platform:e.platform,envVar:s.envVar})).startTransaction(JSON.parse(a.body),{traceparent:a.header("traceparent"),"X-capture-telemetry":a.header("X-capture-telemetry")}),m=h.id;r.send(JSON.stringify({...h,"data-proxy":{endpoint:`https://${c}/${d}/${l}/itx/${m}`}}))}catch(u){ce("error:",u),u instanceof sn?r.status(500).send(JSON.stringify({EngineNotStarted:{reason:{EngineStartupError:{msg:u.message,logs:[]}}}})).end():u instanceof Me?r.status(u.statusCode).send(u.responseBody):r.status(500).end()}}),t.post("/:clientVersion/:schemaHash/itx/:itxId/commit",async(a,r)=>{let i=a.params.itxId;ce("commit itxId: %s",i);let s=Us({clientVersion:a.params.clientVersion,schemaHash:a.params.schemaHash});if(!s){r.status(400).send(JSON.stringify({InteractiveTransactionMisrouted:{reason:"NoQueryEngineFoundError"}}));return}try{let c=await s.commitTransaction(i,{traceparent:a.header("traceparent"),"X-capture-telemetry":a.header("X-capture-telemetry")});r.status(200).send(JSON.stringify(c)).end()}catch(c){ce("error:",c),c instanceof Me?r.status(c.statusCode).send(c.responseBody):r.status(500).end()}}),t.post("/:clientVersion/:schemaHash/itx/:itxId/rollback",async(a,r)=>{let i=a.params.itxId;ce("rollback itxId: %s",i);let s=Us({clientVersion:a.params.clientVersion,schemaHash:a.params.schemaHash});if(!s){r.status(400).send(JSON.stringify({InteractiveTransactionMisrouted:{reason:"NoQueryEngineFoundError"}}));return}try{let c=await s.rollbackTransaction(i,{traceparent:a.header("traceparent"),"X-capture-telemetry":a.header("X-capture-telemetry")});r.status(200).send(JSON.stringify(c)).end()}catch(c){ce("error:",c),c instanceof Me?r.status(c.statusCode).send(c.responseBody):r.status(500).end()}}),t.post("/_mini-proxy/:clientVersion/:schemaHash/stop-engine",async(a,r)=>{ce("stop engine",a.params);let i=Us({clientVersion:a.params.clientVersion,schemaHash:a.params.schemaHash});i?(await i.stop(),r.status(200)):r.status(404),r.end()}),t}async function H1(e){let t=_9(e),n={ca:e.ca&&await Gs.default.readFile(e.ca,"utf8"),key:await Gs.default.readFile(e.key,"utf8"),cert:await Gs.default.readFile(e.cert,"utf8")},a=U1.default.createServer(n,t);return await new Promise((r,i)=>{a.listen(e.port,r).on("error",i)}),console.log("mini-proxy listening on port",e.port),a}0&&(module.exports={decodeKey,decodeKeyOrNull,defaultCertificatesConfig,defaultServerConfig,encodeKey,generateCertificates,generateConnectionString,startServer});
+ itxId: %s `,s,i),!d){ce("schema missing: %s",c),r.status(404).send(JSON.stringify({EngineNotStarted:{reason:"SchemaMissing"}}));return}let l=n.get(a);if(!l){ce("missing key contents in context for request"),r.status(500).end();return}let u="";try{u=await(await $s({schema:d,version:a.params.clientVersion,databaseUrl:l.url,staticEnginePath:e.queryEngine,platform:e.platform,envVar:l.envVar})).request(s,{"X-transaction-id":i,traceparent:a.header("traceparent"),"X-capture-telemetry":a.header("X-capture-telemetry")})}catch(h){ce("error:",h),h instanceof sn?r.status(500).send(JSON.stringify({EngineNotStarted:{reason:{EngineStartupError:{msg:h.message,logs:[]}}}})):h instanceof Me?r.status(h.statusCode).send(h.responseBody):r.status(500).end();return}ce("itx result:",u),r.send(u)}),t.post("/:clientVersion/:schemaHash/transaction/start",async(a,r)=>{let i=Ws(a.params.schemaHash);if(!i){ce("schema missing: %s",a.params.schemaHash),r.status(404).json({EngineNotStarted:{reason:"SchemaMissing"}});return}let s=n.get(a);if(!s){ce("missing key contents in context for request"),r.status(500).end();return}ce("transaction start",a.params);let c=`localhost:${e.port}`,d=a.params.clientVersion,l=a.params.schemaHash;try{let h=await(await $s({schema:i,version:a.params.clientVersion,databaseUrl:s.url,staticEnginePath:e.queryEngine,platform:e.platform,envVar:s.envVar})).startTransaction(JSON.parse(a.body),{traceparent:a.header("traceparent"),"X-capture-telemetry":a.header("X-capture-telemetry")}),m=h.id;r.send(JSON.stringify({...h,"data-proxy":{endpoint:`https://${c}/${d}/${l}/itx/${m}`}}))}catch(u){ce("error:",u),u instanceof sn?r.status(500).send(JSON.stringify({EngineNotStarted:{reason:{EngineStartupError:{msg:u.message,logs:[]}}}})).end():u instanceof Me?r.status(u.statusCode).send(u.responseBody):r.status(500).end()}}),t.post("/:clientVersion/:schemaHash/itx/:itxId/commit",async(a,r)=>{let i=a.params.itxId;ce("commit itxId: %s",i);let s=Us({clientVersion:a.params.clientVersion,schemaHash:a.params.schemaHash});if(!s){r.status(400).send(JSON.stringify({InteractiveTransactionMisrouted:{reason:"NoQueryEngineFoundError"}}));return}try{let c=await s.commitTransaction(i,{traceparent:a.header("traceparent"),"X-capture-telemetry":a.header("X-capture-telemetry")});r.status(200).send(JSON.stringify(c)).end()}catch(c){ce("error:",c),c instanceof Me?r.status(c.statusCode).send(c.responseBody):(console.log(c), r.status(500).end())}}),t.post("/:clientVersion/:schemaHash/itx/:itxId/rollback",async(a,r)=>{let i=a.params.itxId;ce("rollback itxId: %s",i);let s=Us({clientVersion:a.params.clientVersion,schemaHash:a.params.schemaHash});if(!s){r.status(400).send(JSON.stringify({InteractiveTransactionMisrouted:{reason:"NoQueryEngineFoundError"}}));return}try{let c=await s.rollbackTransaction(i,{traceparent:a.header("traceparent"),"X-capture-telemetry":a.header("X-capture-telemetry")});r.status(200).send(JSON.stringify(c)).end()}catch(c){ce("error:",c),c instanceof Me?r.status(c.statusCode).send(c.responseBody):r.status(500).end()}}),t.post("/_mini-proxy/:clientVersion/:schemaHash/stop-engine",async(a,r)=>{ce("stop engine",a.params);let i=Us({clientVersion:a.params.clientVersion,schemaHash:a.params.schemaHash});i?(await i.stop(),r.status(200)):r.status(404),r.end()}),t}async function H1(e){let t=_9(e),n={ca:e.ca&&await Gs.default.readFile(e.ca,"utf8"),key:await Gs.default.readFile(e.key,"utf8"),cert:await Gs.default.readFile(e.cert,"utf8")},a=U1.default.createServer(n,t);return await new Promise((r,i)=>{a.listen(e.port,r).on("error",i)}),console.log("mini-proxy listening on port",e.port),a}0&&(module.exports={decodeKey,decodeKeyOrNull,defaultCertificatesConfig,defaultServerConfig,encodeKey,generateCertificates,generateConnectionString,startServer});
 /*!
  * accepts
  * Copyright(c) 2014 Jonathan Ong